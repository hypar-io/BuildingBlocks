
// This code was generated by Hypar.
// Edits to this code will be overwritten the next time you run 'hypar test generate'.
// DO NOT EDIT THIS FILE.

using Elements;
using Xunit;
using System.IO;
using System.Collections.Generic;
using Elements.Serialization.glTF;

namespace EnvelopeBySite
{
    public class EnvelopeBySiteTest
    {
        [Fact]
        public void TestExecute()
        {
            var input = GetInput();

            var modelDependencies = new Dictionary<string, Model> {
                {"Site", Model.FromJson(File.ReadAllText("../../../Generated/EnvelopeBySiteTest/model_dependencies/Site/model.json")) },
            };

            var result = EnvelopeBySite.Execute(modelDependencies, input);
            result.Model.ToGlTF("../../../Generated/EnvelopeBySiteTest/results/EnvelopeBySiteTest.glb");
            File.WriteAllText("../../../Generated/EnvelopeBySiteTest/results/EnvelopeBySiteTest.json", result.Model.ToJson());
        }

        public EnvelopeBySiteInputs GetInput()
        {
            var inputText = @"
            {
  ""Site Setback"": 4,
  ""Setback Interval"": 20,
  ""Use Setbacks"": false,
  ""Setback Depth"": 1,
  ""Minimum Tier Area"": 50,
  ""model_input_keys"": {
    ""Site"": ""1aea1362-144c-4c59-9d93-3f7bac34513b_ed467745-1cc2-4307-a3b6-4543e79d4916_elements.zip""
  },
  ""Building Height"": 20,
  ""Foundation Depth"": 10,
  ""overrides"": {
    ""Envelope Footprint"": [
      {
        ""value"": {
          ""Perimeter"": {
            ""Vertices"": [
              {
                ""X"": 34.6086,
                ""Y"": 35.62538,
                ""Z"": 0
              },
              {
                ""X"": 15.08992,
                ""Y"": 35.62538,
                ""Z"": 0
              },
              {
                ""X"": 3.92438,
                ""Y"": 29.14722,
                ""Z"": 0
              },
              {
                ""X"": 3.92438,
                ""Y"": 5.05418,
                ""Z"": 0
              },
              {
                ""X"": 29.68074186896261,
                ""Y"": 8.076795970774201,
                ""Z"": 0
              },
              {
                ""X"": 34.6086,
                ""Y"": 8.076795970774201,
                ""Z"": 0
              }
            ],
            ""discriminator"": ""Elements.Geometry.Polygon""
          }
        },
        ""identity"": {
          ""Elevation"": 0
        },
        ""id"": ""1d831bae-ecda-4913-bea1-04ae70c078f7""
      }
    ]
  }
}
            ";
            return Newtonsoft.Json.JsonConvert.DeserializeObject<EnvelopeBySiteInputs>(inputText);
        }
    }
}